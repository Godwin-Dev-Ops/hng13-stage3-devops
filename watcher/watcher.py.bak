import os
import requests
import time

SLACK_WEBHOOK_URL = os.getenv("SLACK_WEBHOOK_URL")

def send_slack_message(text: str):
    if not SLACK_WEBHOOK_URL:
        print("‚ùå SLACK_WEBHOOK_URL not set in environment!")
        return
    try:
        response = requests.post(
            SLACK_WEBHOOK_URL,
            json={"text": text},
            timeout=5
        )
        response.raise_for_status()
        print(f"‚úÖ Sent to Slack: {text}")
    except Exception as e:
        print(f"‚ö†Ô∏è Failed to send Slack message: {e}")

def main():
    print("üëÄ Watcher test script starting...")
    send_slack_message("üëã *Stage 3 Watcher connected successfully!* (Slack test message)")
    print("Now sleeping forever to stay alive.")
    while True:
        time.sleep(60)

if __name__ == "__main__":
    main()

